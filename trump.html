<!DOCTYPE html>
<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
	html, body {
		height: 100%;
		margin: 0;
	}

	img {
		position: absolute;
	}
	
	#wrapper {
		min-height: 100%; 
	}
	.hidden { display: none; }
</style>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>
<body>
<div id="wrapper" width: 100%; height: 100%; style="border:1px solid #d3d3d3;"></div>
<script type="text/javascript">
	var trumpLocationX;
	var trumpLocationY;
	//Size ratio width = 193, height = 142 => W/H = 1.36
	var iWidth = 150, iHeight = 155;

	$( document ).ready(function() {
		chooseLocation();
		var wrapper = document.getElementById("wrapper");
		wrapper.style.border = "black 2px double";
		PositionImage();
		//$("#trumpImage").css("display", "block");
		$("#trumpImage").css('opacity', '0');
		$("#trumpImage").on("click", function(e){
			//$("#trumpImage").css("display", "none")
			$("#trumpImage").css('opacity', '1');
		});
	});
	$("#wrapper").on("click",function(e){
		console.log("Click: " + e.pageX + " " + e.pageY);
		isClickOnImage(e.pageX, e.pageY)
		var audio = new Audio('China.mp3');
		audio.volume = getVolume(event);
		audio.play();
	});

	function isClickOnImage(clickX, clickY){
		var ret = false;
		console.log("x: " + (clickX - trumpLocationX/2) + "  y: " + (clickY - trumpLocationY/2));
		var xClipped = (clickX - trumpLocationX / 2) > 0 ? (clickX - trumpLocationX / 2) : 1000;
		var yClipped = (clickY - trumpLocationY / 2) > 0 ? (clickY - trumpLocationY / 2) : 1000;
		if((xClipped < iWidth)&&(yClipped < iHeight)){
			ret = true;
		}
		console.log("In image: " + ret);
		return ret;
	}
	
	function PositionImage(){
		$("#wrapper").each(function(e){
			var screen = document.getElementById("wrapper");
			var top = trumpLocationY, left = trumpLocationX;
			var img = document.getElementById('trumpImage');
			console.log("screenX: " + screen.clientWidth + "  screenY: " + screen.clientHeight);
			$('#trumpImage').remove();
			var x = Math.round(left - iWidth/2);
			var y = Math.round(top - iHeight/2);
			console.log(x + " " + y);
			$(this).append("<img src='trump.png' id='trumpImage' style='width:"+iWidth+"px; height: "+iHeight+"px; top:"+y+"px;left:"+x+"px;'/>");
		});
	}
	function getVolume(event){
		var screen = document.getElementById("wrapper");
		var clickCoords = getCoords(event);
		var longestDistance = getLongestPossibleDistance(screen.clientWidth, screen.clientHeight, trumpLocationX, trumpLocationY);
		var distance = Math.sqrt(Math.pow(trumpLocationX - clickCoords[0],2) + Math.pow(trumpLocationY - clickCoords[1],2));
		var volume = (1 - Math.pow((distance / longestDistance),1));
		console.log("Volume: " + volume);
		return volume;
	}
	//Theoretically one of the 4 corners has to be the farthest from any point on the screen
	function getLongestPossibleDistance(screenX, screenY, targetX, targetY){
		var bottomLeft = Math.sqrt(Math.pow(targetX - 0,2) + Math.pow(targetY - screenY,2));
		var topLeft = Math.sqrt(Math.pow(targetX - 0,2) + Math.pow(targetY - 0,2));
		var bottomRight = Math.sqrt(Math.pow(targetX - screenX,2) + Math.pow(targetY - screenY,2));
		var topRight = Math.sqrt(Math.pow(targetX - 0,2) + Math.pow(targetY - screenY,2));
		return Math.max(Math.max(Math.max(bottomLeft, bottomRight), topLeft), topRight);
	}
	function getCoords(event) {
		var x = event.clientX;
		var y = event.clientY;
		return [x,y];
	}
	function chooseLocation(){
		var screen = document.getElementById("wrapper");
		trumpLocationX = getRandomInt(0, screen.clientWidth);
		trumpLocationY = getRandomInt(0, screen.clientHeight);
		
	}
	function getRandomInt(min, max) {
		var budget = 0.1;
		min = max * budget;
		max = max * (1-budget);
		return Math.floor(Math.random() * (max - min + 1)) + min;
	}
</script>
</body>
</html>